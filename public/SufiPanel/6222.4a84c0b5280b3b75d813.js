(self.webpackChunksufi_panel=self.webpackChunksufi_panel||[]).push([[6222],{6222:(e,t,n)=>{"use strict";n.r(t),n.d(t,{UkNewTransactionModule:()=>E});var r=n(1116),o=n(4140),i=n(1462),a=n(7368),l=n(2749),d=n(5703),s=n(8918),m=n(8307);function c(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"option",29),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275property"]("value",e.dr_cr_to),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](e.dr_cr_to_show)}}function p(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"span",13),a["\u0275\u0275text"](1,"Amount is required!"),a["\u0275\u0275elementEnd"]())}function u(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275template"](1,p,2,0,"span",30),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",null==e.newDebitCreditForm.controls.dr_amount.errors?null:e.newDebitCreditForm.controls.dr_amount.errors.required)}}function f(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"option",29),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275property"]("value",e.dr_cr_to),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](e.dr_cr_to_show)}}function _(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"span",13),a["\u0275\u0275text"](1,"Amount is required!"),a["\u0275\u0275elementEnd"]())}function b(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275template"](1,_,2,0,"span",30),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",null==e.newDebitCreditForm.controls.cr_amount.errors?null:e.newDebitCreditForm.controls.cr_amount.errors.required)}}function h(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"span",13),a["\u0275\u0275text"](1,"Description is required!"),a["\u0275\u0275elementEnd"]())}function v(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275template"](1,h,2,0,"span",30),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",null==e.newDebitCreditForm.controls.tr_description.errors?null:e.newDebitCreditForm.controls.tr_description.errors.required)}}const g=[{path:"",component:(()=>{class e{constructor(e,t,n,r,o,i,a){this.spinner=e,this.modalService=t,this.fb=n,this.notifierService=r,this.datePipe=o,this.router=i,this.accountService=a,this.isSubmitted=!1,this.saveUKNewTransaction=()=>{if(this.isSubmitted=!0,this.newDebitCreditForm.valid){this.spinner.show();let e={dr_pay_to:this.newDebitCreditForm.controls.dr_pay_to.value,cr_pay_by:this.newDebitCreditForm.controls.cr_pay_by.value,cr_amount:this.newDebitCreditForm.controls.cr_amount.value,dr_amount:this.newDebitCreditForm.controls.dr_amount.value,cr_booking_ref:this.newDebitCreditForm.controls.cr_booking_ref.value,dr_booking_ref:this.newDebitCreditForm.controls.dr_booking_ref.value,tr_description:this.newDebitCreditForm.controls.tr_description.value,card_number:"",next_due_Date:"",transectionDate:this.newDebitCreditForm.controls.transaction_date.value};console.log(e),this.accountService.postUKTransaction(e).subscribe(e=>{"True"===e.status&&(this.spinner.hide(),this.isSubmitted=!1,this.newDebitCreditForm.reset(),this.notifier.notify("success","Successfully Saved"))},e=>{this.spinner.hide(),this.notifier.notify("error",e)})}else this.notifier.notify("error","Form is not Valid!")},this.getTransactionBox=()=>{this.spinner.show(),this.accountService.getTransactionBox({}).subscribe(e=>{"True"===e.status&&(this.spinner.hide(),this.boxData=e.data.supplierData.concat(e.data.BankData,e.data.ExpenseData,e.data.IncomData),this.boxData.map(e=>{e.supplier_name&&(e.dr_cr_to_show=e.supplier_name,e.dr_cr_to=e.supplier_name+"%supplier"),e.bank_name&&(e.dr_cr_to_show=e.bank_name,e.dr_cr_to=e.bank_name+"%bank"),e.expense_name&&(e.dr_cr_to_show=e.expense_name,e.dr_cr_to=e.expense_name+"%expense"),e.head_name&&(e.dr_cr_to_show=e.head_name,e.dr_cr_to=e.head_name+"%income")}),console.log(this.boxData))})};let l=new Date;this.todayDate=this.datePipe.transform(l,"yyyy-MM-dd"),this.notifier=r}ngOnInit(){this.newDebitCreditForm=this.fb.group({dr_pay_to:["null"],dr_amount:["",i.Validators.required],dr_booking_ref:[""],cr_pay_by:["null"],cr_amount:["",i.Validators.required],cr_booking_ref:[""],tr_description:["",i.Validators.required],tr_card:[""],transaction_date:[this.todayDate]}),this.getTransactionBox()}get debitsControls(){return this.newDebitCreditForm.get("addDebitForm").controls}get creditsControls(){return this.newDebitCreditForm.get("addCreditForm").controls}addDebit(){this.addDebitForm=this.newDebitCreditForm.get("addDebitForm"),this.addDebitForm.push(this.createDebit())}addCredit(){this.addCreditForm=this.newDebitCreditForm.get("addCreditForm"),this.addCreditForm.push(this.createCredit())}removeDebit(e){0!==e&&this.addDebitForm.removeAt(e)}removeCredit(e){0!==e&&this.addCreditForm.removeAt(e)}logValue(){console.log(this.addDebitForm.value)}createDebit(){return this.fb.group({dr_pay_to:["null"],dr_amount:[""],dr_booking_ref:[""]})}createCredit(){return this.fb.group({cr_pay_by:["null"],cr_amount:[""],cr_booking_ref:[""]})}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](l.t2),a["\u0275\u0275directiveInject"](d.gk),a["\u0275\u0275directiveInject"](i.FormBuilder),a["\u0275\u0275directiveInject"](s.lG),a["\u0275\u0275directiveInject"](r.uU),a["\u0275\u0275directiveInject"](o.F0),a["\u0275\u0275directiveInject"](m.i))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-uk-new-transaction"]],decls:75,vars:7,consts:[[1,"iq-card","iq-card-block","iq-card-stretch","iq-card-height"],[1,"iq-card-header","d-flex","justify-content-between"],[1,"iq-header-title"],[1,"card-title"],[1,"iq-card-body"],[1,"row","m-2",2,"background-color","var(--iq-light-primary)","border-radius","15px"],[1,"col-md-12"],[3,"formGroup"],[1,"row","m-3"],[1,"col-md-3","form-group"],["type","date","formControlName","transaction_date",1,"form-control","form-control-sm"],[1,"row"],[1,"col-md-6","form-group"],[1,"text-danger"],["formControlName","dr_pay_to",1,"form-control"],["value","null","selected",""],[3,"value",4,"ngFor","ngForOf"],["aria-hidden","true",1,"fa","fa-gbp"],["type","text","formControlName","dr_amount",1,"form-control","form-control-sm"],[4,"ngIf"],["type","text","formControlName","dr_booking_ref",1,"form-control"],["formControlName","cr_pay_by",1,"form-control"],["type","text","formControlName","cr_amount",1,"form-control"],["type","text","formControlName","cr_booking_ref",1,"form-control"],["type","text","formControlName","tr_description",1,"form-control","form-control-sm"],[1,"text-center","my-5"],["data-title","Save ",1,"saveBtn",3,"click"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate",3,"fullScreen"],[2,"color","white"],[3,"value"],["class","text-danger",4,"ngIf"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275elementStart"](3,"h2",3),a["\u0275\u0275text"](4,"UK New Transaction"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"div"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](6,"notifier-container"),a["\u0275\u0275elementStart"](7,"div",4),a["\u0275\u0275elementStart"](8,"div",5),a["\u0275\u0275elementStart"](9,"div",6),a["\u0275\u0275elementStart"](10,"form",7),a["\u0275\u0275elementStart"](11,"div",8),a["\u0275\u0275elementStart"](12,"div",9),a["\u0275\u0275elementStart"](13,"label"),a["\u0275\u0275text"](14,"Transaction Date "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](15,"input",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",11),a["\u0275\u0275elementStart"](17,"div",12),a["\u0275\u0275elementStart"](18,"label"),a["\u0275\u0275text"](19,"To (Dr.): "),a["\u0275\u0275elementStart"](20,"span",13),a["\u0275\u0275text"](21,"*"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"select",14),a["\u0275\u0275elementStart"](23,"option",15),a["\u0275\u0275text"](24,"--Select One--"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](25,c,2,2,"option",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"div",9),a["\u0275\u0275elementStart"](27,"label"),a["\u0275\u0275text"](28,"Amount ("),a["\u0275\u0275element"](29,"i",17),a["\u0275\u0275text"](30,"): "),a["\u0275\u0275elementStart"](31,"span",13),a["\u0275\u0275text"](32,"*"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](33,"input",18),a["\u0275\u0275template"](34,u,2,1,"div",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](35,"div",9),a["\u0275\u0275elementStart"](36,"label"),a["\u0275\u0275text"](37,"Booking Ref: "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](38,"input",20),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](39,"hr"),a["\u0275\u0275elementStart"](40,"div",11),a["\u0275\u0275elementStart"](41,"div",12),a["\u0275\u0275elementStart"](42,"label"),a["\u0275\u0275text"](43,"By (Cr.): "),a["\u0275\u0275elementStart"](44,"span",13),a["\u0275\u0275text"](45,"*"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](46,"select",21),a["\u0275\u0275elementStart"](47,"option",15),a["\u0275\u0275text"](48,"--Select One--"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](49,f,2,2,"option",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](50,"div",9),a["\u0275\u0275elementStart"](51,"label"),a["\u0275\u0275text"](52," Amount ("),a["\u0275\u0275element"](53,"i",17),a["\u0275\u0275text"](54,"): "),a["\u0275\u0275elementStart"](55,"span",13),a["\u0275\u0275text"](56,"*"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](57,"input",22),a["\u0275\u0275template"](58,b,2,1,"div",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](59,"div",9),a["\u0275\u0275elementStart"](60,"label"),a["\u0275\u0275text"](61,"Booking Ref: "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](62,"input",23),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](63,"hr"),a["\u0275\u0275elementStart"](64,"div",11),a["\u0275\u0275elementStart"](65,"div",12),a["\u0275\u0275elementStart"](66,"label"),a["\u0275\u0275text"](67,"Description: "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](68,"input",24),a["\u0275\u0275template"](69,v,2,1,"div",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](70,"div",25),a["\u0275\u0275elementStart"](71,"a",26),a["\u0275\u0275listener"]("click",function(){return t.saveUKNewTransaction()}),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](72,"ngx-spinner",27),a["\u0275\u0275elementStart"](73,"p",28),a["\u0275\u0275text"](74," Loading... "),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](10),a["\u0275\u0275property"]("formGroup",t.newDebitCreditForm),a["\u0275\u0275advance"](15),a["\u0275\u0275property"]("ngForOf",t.boxData),a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("ngIf",t.isSubmitted||t.newDebitCreditForm.controls.dr_amount.invalid&&(t.newDebitCreditForm.controls.dr_amount.dirty||t.newDebitCreditForm.controls.dr_amount.touched)),a["\u0275\u0275advance"](15),a["\u0275\u0275property"]("ngForOf",t.boxData),a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("ngIf",t.isSubmitted||t.newDebitCreditForm.controls.cr_amount.invalid&&(t.newDebitCreditForm.controls.cr_amount.dirty||t.newDebitCreditForm.controls.cr_amount.touched)),a["\u0275\u0275advance"](11),a["\u0275\u0275property"]("ngIf",t.isSubmitted||t.newDebitCreditForm.controls.tr_description.invalid&&(t.newDebitCreditForm.controls.tr_description.dirty||t.newDebitCreditForm.controls.tr_description.touched)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("fullScreen",!0))},directives:[s.TK,i["\u0275NgNoValidate"],i.NgControlStatusGroup,i.FormGroupDirective,i.DefaultValueAccessor,i.NgControlStatus,i.FormControlName,i.SelectControlValueAccessor,i.NgSelectOption,i["\u0275NgSelectMultipleOption"],r.sg,r.O5,l.Ro],styles:['.saveBtn[_ngcontent-%COMP%]{position:relative;display:inline-block;padding:1.2em 2em;text-decoration:none;text-align:center;cursor:pointer;-webkit-user-select:none;user-select:none;color:#fff}.saveBtn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;bottom:0;right:0;background:linear-gradient(135deg,#6e8efb,#a777e3);border-radius:4px;transition:box-shadow .5s ease,transform .2s ease;will-change:transform;box-shadow:0 2px 5px #0003;transform:translateY(var(--ty,0)) rotateX(var(--rx,0)) rotateY(var(--ry,0)) translateZ(var(--tz,-12px))}.saveBtn[_ngcontent-%COMP%]:hover:before{box-shadow:0 5px 15px #0000004d}.saveBtn[_ngcontent-%COMP%]:after{position:relative;display:inline-block;content:attr(data-title);transition:transform .2s ease;font-weight:700;letter-spacing:.01em;will-change:transform;transform:translateY(var(--ty,0)) rotateX(var(--rx,0)) rotateY(var(--ry,0))}.form-control[_ngcontent-%COMP%]{background-color:#fff}']}),e})()}];let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[o.Bz.forChild(g)],o.Bz]}),e})();var C=n(2693),x=n(7241),w=n(8453),y=n(9282),D=n(4510);const F={position:{horizontal:{position:"right",distance:12},vertical:{position:"bottom",distance:12,gap:10}},theme:"material",behaviour:{autoHide:5e3,onClick:!1,onMouseover:"pauseAutoHide",showDismissButton:!0,stacking:4},animations:{enabled:!0,show:{preset:"slide",speed:300,easing:"ease"},hide:{preset:"fade",speed:300,easing:"ease",offset:50},shift:{speed:300,easing:"ease"},overlap:150}};let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({imports:[[r.ez,S,l.ef,s.Eb.withConfig(F),d.zk,C.JF,i.ReactiveFormsModule,w.h,i.FormsModule,D.K,y.JX,x.UM]]}),e})()}}]);